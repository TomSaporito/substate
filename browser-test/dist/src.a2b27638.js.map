{"version":3,"sources":["node_modules/deep-clone-simple/index.js","node_modules/object-bystring/dist/index.js","node_modules/substate/dist/index.dev.js","src/state.js","src/form/form.js","src/list/list.js","src/undoredo/undoredo.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["deepcopy","value","Object","prototype","toString","call","Date","getTime","Array","isArray","map","result","keys","forEach","key","store","substate","state","todos","createTodo","text","newState","$type","getProp","concat","emit","wireForm","form","document","querySelector","addEventListener","e","preventDefault","input","target","length","list","wireList","on","addIt","html","todo","li","innerHTML","wireUndoRedo","undo","redo","currentState","stateStorage","requestedState","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","module"],"mappings":"AQAA,ACAA,IDAIkD,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;ARAA;AACA,AOAA,ACCA,APFA,AKAA,SCCSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,APFF,MMCM,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEjB,ANDJ,AKDA,ICEIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,APDF,EOCEA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,APDJ,AKFA,IEGIA,IAAI,CAACI,MAAL;ATLW,AQMb,ACAC,APDH,AELA,ACAA,AFAA,AGAA,GGIE,MTJsBrE,AQMfkD,QRNM,CAAkBjD,AQM/B,KRNa,EAAyB;AACtC,AQMD,ANDD,AKHA,MPFM,EAAE,CAAC,CAACA,KAAF,IAAW,OAAOA,KAAP,IAAgB,QAA7B,CAAJ,EAA4C;AAC1C,ASKFiE,APAF,AELA,ACAA,ACAe,EGKbA,EJLE9B,IAAI,CIKC,ALLAjB,AEAeyB,CGKd0B,CTLCrE,AKAA,GIKT,CJLF,CLAI,CSKagE,ELLjB,CAAqB7C,CKKA,AHLN,CGKOkD,ELLtB,AEAuC,EGKtB,ALLU,CKKAC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCjE,IAAI,CAACkE,GAAL,EAA/C;ATJC,AQMH,ACDEP,APAF,AELE,AEAA,EGKAA,IAAI,ALLE5C,AEAAwB,CGKD4B,EDCErB,CFNG,GAAGxB,CFAC,GKKd,ALLiB,CKKD8C,GDClB,AFNuB,CAAC7C,EEMA,MCDtB,CAA6BqC,IHLhB,CAAuB,EGKpC,EAAsCD,IAAI,CAACU,UHL9B,CGKb,AHLA;AEOA,ACDD,APAD,AELIrD,ACAW,AFFR,AGEL,IFAEA,ADFSP,EGEL+B,GFAC,ACAeT,AFFN,CGEN,CFAD,CDFU,CGENT,GHFUZ,CEEV,GAAoB,CCAZ,CAACa,EFDL,SDDE,CAAa,CGEnB,CAAuB,mBAAvB,CAAb;ANAA,AQOA,ANDF,AELIX,AGDJ,AFCEkB,AFFEnB,AGGF6B,EDDAV,AFFEnB,AGGF6B,EFDE5B,EJDEhB,AQOA,AHNA,ACCA,CHHG,AGGF4B,EFDE,ACAAF,AFFE,ECEAb,CJDC,CAACZ,IKCI,CAAC0B,ILDZ,CAAiBzB,AMErB,CFDemB,AECO,ONFlB,AICK,ACAF,ACCP,CNF8BlB,AICP,ACAO,CCCC,GNF3B,CAA+BJ,EIC1B,EAAuBuB,CJD5B,GMEiC,ENFQ,AICpC,CAA8B,CAACJ,ECAjC,CAAP,CDAuC,CAA9B,QJDT,EAA8D;AAC5D,AQOA,ACDJ,APAA,AERmB,AGEnB,AJDQF,AGGJ,GFJF,CKQE0D,ANPI1D,IGGAH,CHHK,CKQH,CRPC,AGDI,GKQDsC,ACDA,CTNC/C,ESME,ETNN,AQOD,CRPUL,CQOhB,ACDJ,AHJc8C,INFW,CAACxC,OAAN,AMEZ,ENFG,CAAP,EME2BQ,aAAMiC,YAAN,CAAmBb,MAAnB,GAA4B,CAAvD,EAA0D;AND3D,AQOA,ANDH,AKNA,AFCEpB,AFJS,AGKLA,GEGJ,CAEE,OAAOuC,GAAP,CHNIhB,CGMQ,CHNd,CAAS,CCCCb,IAAN,CAAW,ODDf,EAAwBc,KAAxB,ACCI,EAA2B;AEM7B,ACFJ,APCA,AENExB,ACED,AFPiC,AGO1BkC,CHPa,CAAd,MKYCM,AFLAN,CGGC4B,MDEM,AJPPpD,GIOU,ACFlB,CDEmB,AJPjB,CAAW,CKKQ,CHHC,EEKE6B,AFLCvC,GEKE,CAACyC,KAAV,CJPhB,CIOiCC,CJPNpC,CEEE0B,GEKb,CAAuB,GJPvC,KEEuB,GAAqB,CADb,mDEMf,CAAd;ARPF,ASMA,APCF,AENC,AEEOzB,MNHFd,ASMAoE,EHHEtD,GNHG,CAACb,CMGC,EAAE,CGGb,EAAgB,CTNZ,CAAcR,KAAd,CAAJ,EAA0B;AACxB,AQOA,ACDA,APCJ,AGHA,ACJiC,OAA3B,CEOEsD,CHHChB,ELJEtC,GKIX,CGGI,AHHWgB,CLJC,CAACP,AQOA,GRPN,AKIX,CLJqBV,CKIC,OLJX,CAAP;AACD,AQOG,ACDH,APCH,AERC,ACKC,ACDG,MDCCwC,IAAI,GGGGkB,EHHX,QGGqB,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD,ANAL,AGHEtC,ACDC,EDCDA,CCRA,IDQK,CAACC,KAAN,CAAYR,GAAZ,CAAgB,UAAA+B,IAAI,EAAI;ALJxB,AQQC,ACDDmC,APCF,AERe,ACKX,ACAF/B,EGEA+B,AHFA/B,INLIlC,AMKA,CAACmB,EFLiBJ,GJAZ,ASOA,GTPG,ASOAoD,ETPb,AIAa,GAAoB,GEKjC,CAAsB,CGEC,AJFPrC,CIEQ,GJFtB,ECAF,EAA+B,KGEK,OHFC;ANJrCvC,ASOE,APCJ,AERE,ACKC,ACAC,ENLFA,CKGA,EAEGW,CDLGc,EJAA,ASOAoD,AHFAhE,CNLCH,CIAG,ECGV,CLHA,ASOW,ALPEgB,ACKF,CLLC3B,ESOE2B,GTPd,EAAmBf,AIAE,AEKTkC,CFLUlB,CCKXa,CIEW,CAACsC,AJFV,EAAI,CLLjB,CACE,IMII,EFLO,CAAuB,EEKP,CNJlBlE,AMIT,EGEY,AHFkB,CNJ9B,ASMsC,ETNxB,WIDH,CAAb,UKOc,CAAZ;ATNgBH,AQQlB,ANAF,AEREgB,ACKEa,ACAEzB,EFLJY,EJAkBhB,AKKhB6B,EDLE,CAACV,CCKC,CGGC,CRRiB,CAAChB,CQQzB,AHHU4B,ELLc,AKKtB,CLLgB,GAAc1C,CMKtByB,IFLV,AEKI,CFLkB,AEKP,ENLyB,CAACxB,KAAK,AIA9C,CJA+Ca,CIAf,EJAc,CAAN,CAAtB,AMKd,EAA2B,IFLCiB,CAAC,EAAI;AJAkB,AQSxD,ACFG,APEJ,AERIA,ACKD,ACAKkB,GNPN,AKGA,CDDElB,CAAC,CAACC,EEKEiB,CGCC,IAAIgC,CAAC,GAAG,CAAb,EAAgBA,ALNhB,CKMiB,CHDC,EGCEF,AHDChE,KGCI,CAACoB,MAA1B,CHD2BY,CGCOkC,CAAC,EAAnC,EAAuC,MHDlB,GAAoB,CADZ;ANJ/B,ASOI,APEN,AERI,ACKF7C,ACAMd,EDANc,IAAI,CAACO,CDLGV,AEKFX,CNNCX,CSOCmD,GLNK,AEKF,ENNX,AMMa,CGCC,ALNE/B,ACKhB,CICe2B,ALNE,CAACxB,CCKDM,IAAjB,CDLgB,CAASX,EKMjB,CAAkBkD,KAAK,CAACE,CAAD,CAAL,CAASX,CLNnB,CAAuB,EKM/B,KLNQ,CKM6BR,ALN3C,MKMiD,CAACV,YAAP,EAAzC,EAAgE;ATNrE,AQSD,ACFQY,APER,AERI,ACKH,ACHgC,OAA3B,CGIEA,ALNE5C,CIQDsC,GJRK,GAAGzB,GKMC,CDElB,ACFmB8C,CDECpB,AJRE,CAAC1D,EIQvB,CCFwB,CDEC,ACFAgF,CAAD,ALNpB,CKMc,CAAV;ADGN,ACFK,APEP,AIHK,SEGI,CAAC,KAAKtB,GAAN,EAAWC,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,APEL,AETI,AEMD,GAPD,KFCMxC,IAAI,CAACe,MAAL,GAAc,CAAlB,EAAqB;AFUzB,AETMhB,AEML,MFNKA,UAAU,CAACC,IAAD,CAAV;AIUNyC,ACFIe,APEJ,AETM3C,IKOF2C,ELPE3C,CISC,CAACmB,GJTG,CAACnD,EKOE,GAAG,ALPX,GISN,AJToB,CKOhB,CLPE,CISiBkD,kBAAvB;AACAU,ACFG,APEH,AETK,GKFoB,EASpB,EDEE,ACXkB,CDWjBH,ACXN,UDWF,GAAqBA,UAArB;ACDC,APED,AETG,GARD;AFkBF,AETC;AKQDwB,APEA,MOFM,CAACrB,OAAP,GAAiBgB,SAAjB;APGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["export default function deepcopy(value) {\n  if (!(!!value && typeof value == 'object')) {\n    return value;\n  }\n  if (Object.prototype.toString.call(value) == '[object Date]') {\n    return new Date(value.getTime());\n  }\n  if (Array.isArray(value)) {\n    return value.map(deepcopy);\n  }\n  var result = {};\n  Object.keys(value).forEach(\n    function(key) { result[key] = deepcopy(value[key]); });\n  return result;\n}\n","!function(e){\"function\"==typeof define&&define.amd?define(e):e()}(function(){\"use strict\";module.exports=function(e,n,t){for(var i=e,r=(n=(n=n.toString().replace(/\\[(\\w+)\\]/g,\".$1\")).toString().replace(/^\\./,\"\")).split(\".\"),o=0;o<r.length;++o){var f=r[o];f in i?i.hasOwnProperty(f)&&(void 0!==t&&o===r.length-1&&(i[f]=t),i=i[f]):i[f]=t}return i}});\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('deep-clone-simple'), require('object-bystring')) :\n    typeof define === 'function' && define.amd ? define(['deep-clone-simple', 'object-bystring'], factory) :\n    (global = global || self, global.substate = factory(global.deepclone, global.byString));\n}(this, function (deepclone, byString) { 'use strict';\n\n    deepclone = deepclone && deepclone.hasOwnProperty('default') ? deepclone['default'] : deepclone;\n    byString = byString && byString.hasOwnProperty('default') ? byString['default'] : byString;\n\n    /**\n     * Created by root on 6/27/17.\n     */\n    class PubSub{\n        constructor(){\n            this.events = {};\n\n        }\n\n        on(eventName, fn){\n\n            this.events[eventName] = this.events[eventName] || [];\n            this.events[eventName].push(fn);\n\n        }\n\n        off(eventName, fn) {\n            if (this.events[eventName]) {\n                for (var i = 0; i < this.events[eventName].length; i++) {\n                    if (this.events[eventName][i] === fn) {\n                        this.events[eventName].splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        }\n\n        emit(eventName, data) {\n            // console.log('in emit: ', data);\n            if (this.events[eventName]) {\n                this.events[eventName].forEach(function(fn, i) {\n                    // console.log(i, eventName, data);\n                    fn(data);\n                });\n            }\n        }\n\n    }\n\n    const S = \"UPDATE_STATE\";\n    const C = \"CHANGE_STATE\";\n\n    class substate extends PubSub {\n      constructor(obj = {}) {\n        super();\n        console.log(\"You are using a dev version of substate\");\n\n        this.name = obj.name || \"SubStateInstance\";\n        this.afterUpdate = obj.afterUpdate || [];\n        this.beforeUpdate = obj.beforeUpdate || [];\n        this.currentState = obj.currentState || 0;\n        this.stateStorage = obj.stateStorage || [];\n        this.defaultDeep = obj.defaultDeep || false;\n\n        if (obj.state) this.stateStorage.push(obj.state);\n        this.on(S, this.updateState.bind(this));\n        this.on(C, this.changeState.bind(this));\n      }\n\n      getState(index) {\n        return this.stateStorage[index];\n      }\n\n      getCurrentState(s) {\n        return this.getState(this.currentState);\n      }\n\n      getProp(prop) {\n        return byString(this.getCurrentState(), prop);\n      }\n\n      changeState(action) {\n        this.currentState = action.requestedState;\n        this.emit(action.$type || \"STATE_CHANGED\", this.getCurrentState());\n      }\n\n      resetState() {\n        this.currentState = 0;\n        this.stateStorage = [this.stateStorage[0]];\n        this.emit(\"STATE_RESET\");\n      }\n\n      // Updates the state history array and sets the currentState pointer properly\n      pushState(newState) {\n        this.stateStorage.push(newState);\n        this.currentState = this.stateStorage.length - 1;\n        console.log(\"State Pushed\");\n      }\n\n      updateState(action) {\n        this.beforeUpdate.length > 0\n          ? this.beforeUpdate.forEach(func => func(this, action))\n          : null;\n        let newState;\n        if (action.$deep || this.defaultDeep) {\n          newState = deepclone(this.getCurrentState()); // deep clonse\n        } else {\n          newState = Object.assign({}, this.getCurrentState()); // shallow clone\n        }\n\n        //update temp new state\n        for (let key in action) {\n          console.log(\"replacing key \", key);\n          if (action.hasOwnProperty(key)) byString(newState, key, action[key]);\n          //update cloned state\n        }\n\n        this.defaultDeep ? null : (newState.$deep = false); // reset $deep keyword\n\n        console.log(\"New State: \", newState);\n        console.log('Inside this store: ', this.name);\n\n        if (!action.$type) newState.$type = S;\n\n        //pushes new state\n        this.pushState(newState);\n\n        this.afterUpdate.length > 0\n          ? this.afterUpdate.forEach(func => func(this))\n          : null;\n        this.emit(action.$type || \"STATE_UPDATED\", this.getCurrentState()); //emit with latest data\n      }\n    }\n\n    return substate;\n\n}));\n","import substate from 'substate/dist/index.dev.js';\n\nexport const store = new substate({\n    state: {\n        todos: []\n    }\n});\n\n","import { store } from '../state';\n\nfunction createTodo (text) {\n  const newState = {\n    $type: \"UPDATE_TODO\",\n    todos: store.getProp('todos').concat([text])\n  };\n  store.emit(\"UPDATE_STATE\", newState);\n};\n\nexport default function wireForm() {\n  const form = document.querySelector('[data-ref=\"form\"]');\n  form.addEventListener(\"submit\", e => {\n    e.preventDefault();\n    const input = e.target.querySelector(\"input\");\n    const text = input.value;\n    if (text.length > 0) {\n      createTodo(text);\n      input.value = '';\n    }\n  });\n}\n","import { store } from \"../state\";\n\nlet list = null;\n\nexport default function wireList() {\n  list = document.querySelector('[data-ref=\"list\"]');\n\n  store.on('UPDATE_TODO', addIt);\n\n}\n\n\nfunction addIt(state) {\n  let html = ``;\n  state.todos.map(todo => {\n    return `<li>${todo}</li>`;\n  }).forEach(li => {\n    html += li;\n  });\n  list.innerHTML = html;\n}\n","import { store } from \"../state\";\n\nexport default function wireUndoRedo() {\n  const undo = document.querySelector('[data-ref=\"undo\"]');\n  const redo = document.querySelector('[data-ref=\"redo\"]');\n\n  redo.addEventListener(\"click\", () => {\n    if (store.currentState !== store.stateStorage.length - 1) {\n      store.emit(\"CHANGE_STATE\", {\n        requestedState: (store.currentState + 1),\n        $type: \"UPDATE_TODO\"\n      });\n    }\n  });\n\n  undo.addEventListener(\"click\", () => {\n    if (store.currentState !== 0) {\n      store.emit(\"CHANGE_STATE\", {\n        requestedState: (store.currentState -1),\n        $type: \"UPDATE_TODO\"\n      });\n    }\n  });\n}\n","import \"./styles.css\";\nimport wireForm from \"./form/form\";\nimport wireList from \"./list/list\";\nimport wireUndoRedo from './undoredo/undoredo';\nwireForm();\nwireList();\nwireUndoRedo();\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}