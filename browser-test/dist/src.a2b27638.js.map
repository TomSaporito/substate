{"version":3,"sources":["node_modules/deep-clone-simple/index.js","node_modules/object-bystring/dist/index.js","node_modules/substate/dist/index.js","src/form/formState.js","src/form/form.js","src/list/listState.js","src/list/list.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["deepcopy","value","Object","prototype","toString","call","Date","getTime","Array","isArray","map","result","keys","forEach","key","store","substate","name","state","todos","createTodo","text","newState","emit","wireForm","form","document","querySelector","addEventListener","e","preventDefault","target","length","addTodoList","getProp","todo","wireList","list","addIt","console","log","innerHTML","on","listStore","formStore","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","module"],"mappings":"AQAA,ACAA,IDAI6C,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;ARAA,ACAA;ADCA,AOAA,ACCA,APDA,AKDA,SCCSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEjB,ADDJ,ICCIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AFFJ,IEEIA,IAAI,CAACI,MAAL;ATLW,AQMb,ACAC,ALNH,ADAA,AGAA,ADAA,GIIE,MTJsBhE,AQMf6C,QRNM,CAAkB5C,AQM/B,KRNa,EAAyB;AACtC,AQMD,ADHD,MPHM,EAAE,CAAC,CAACA,KAAF,IAAW,OAAOA,KAAP,IAAgB,QAA7B,CAAJ,EAA4C;AAC1C,ASKF4D,ALNa,ADCf,AEAA,EIKEA,ENLI9C,AEAAA,KIKG,ALNeS,ADCb,AEAA,CIKDyC,CTLChE,CGAG,AEAA,EIKZ,ETLE,AGAce,AEAAA,CIKD4C,ALNF,GAAoB,CKMd,CAACK,IAAL,CAAUC,KAAV,CAAgB,CNLnB,AEAA,CFAa,AEAA,CIKV,EAAqB,CAArB,IAA0B,GAA1B,GAAgC5D,IAAI,CAAC6D,GAAL,EAA/C;ATJC,AQMH,ACDEP,ALNA,ADCA3C,AIEF,AFFEA,EIKA2C,ANLA3C,AEAAA,IIKI,ALNEQ,ADCF,AEAA,CIKC2C,CNLC,AEAA,CGMCrB,CJPG,GAAGrB,IKMb,CAAgB2C,CNNS,EKO3B,AJPuB,CAAC1C,EIOA,MCDtB,CAA6BkC,ILNhB,CAAuB,EKMpC,EAAsCD,IAAI,CAACU,ULN9B,CKMb,ALNA;AIQA,ACDD,ALNC7C,ADCAP,AEFyB,CAAb,CDCZO,ADCAP,AEFF,IDCM,CAACU,ADCA,EAAE,cCDP,CAAsB,QAAtB,EAAgC,UAAAC,CAAC,EAAI;AJCrC,AQOA,AJPEA,ADCAV,AICJ,IHFIU,ADCAV,CCDC,CJACjB,AQOA,AJPA4B,GDCG,EAAE,CHDC,CAAC3B,OIAT,EJAE,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,KAA/B,KAAyC,eAA7C,EAA8D;AAC5D,AQOA,ACDJ,ALNI,ADDK,AGFM,ADIR,IIKHsE,AJLStC,IDDHZ,CEHce,CEUd,CRPC,CIAG,EIOAY,ACDA,CTNC1C,AIAEuB,ACCO,CDDN,CKMD,ALNEE,AEHJ,CDIY,CLDhB,AQOD,CRPU9B,AMHe,CEU/B,ACDJ,ELNiB,CAAS0B,CJAD,CAACpB,CKCb0B,MLDO,EAAT,CAAP,CIAa,CAAuB,ACCb,CAAAf,KAAK,CDDf,CCCmB,CDDajB,KAA7C;AJCD,AQOA,ALXwB,AGCzB,ADIA,CFLY,CAAd,CKSE,CAEE,EFVIoC,GDICnB,CCJG,CEUD+B,EFVIvB,CEUX,AHNU,CAACQ,CGMC,KFVO,CAACP,ADIf,CAAc,OAAd,EAAuBjB,GCJjB,ADIN,CCJ6B,ADIF,UAAAyB,IAAI,EAAI,GCJ7B,CAAb;AEWE,ACFJ,ALNI,ACEA,QGMIe,AJRA7B,CKMCmD,GLNG,CAACxC,EIQE,GAAG,ACFlB,CDEmB,AJRX,EKMa,CLNC,CAAlB,CIQoBiB,CJRC,ACEPd,EGMS,CAACgB,CHNxB,IGMc,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;ARPF,ASMA,ALNI,ADEC,AIFP,ADFE,ADIC,GAFM,CFEIhC,AEFX,ELAIZ,ASMA+D,KTNK,AMFAjC,CNEC7B,EGEW,EMIrB,AHRA,CHIwB,CMIR,CTNZ,AMFa,CNECR,KAAd,CAAJ,AGEWmB,EHFe,KIAXC,GDES,CCFpB,ADEoBA,IAAI,EAAI;AHD9B,AQOA,ACDA,ALNC,ADEH,AIFF,ADFIkB,ADIH,CAJM,GCAHA,EHIIjB,EKKA4B,GRPGjD,AMFA,CAACuC,EHII,CKKZ,AFTA,CNEY,AMFA,CNEC9B,AQOA,ALLE,GHFR,AMFP,CNEiBV,QAAV,CAAP;AACD,AQOG,ACDH,ALNA,ADEC,AIDJ,ADHIqC,GFJF,CGOItB,ADHFsB,IAAI,CCGG,ADHFI,GCGK,CCMDY,KFTT,GAAiB,EESE,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB,IDNoB,CAACP,UDHvB,QCGsB,EAAYC,kBAAZ,CAAZ,EAAoC;ACO7C,AJPJ,ADEGzB,AIDFF,ADHC,ECGDA,EJCEE,EIDE,EAAE,CJCC,EAAE,CAACE,IAAD;AHFT,AQQC,ACDDkD,ANPiB,AIA+B,CAApC,CEOZA,AFPF,CJAE,GHAI5D,MAAM,ASOA,GTPG,ASOA8D,AJLA1D,ELFb,QSOuB,CAAC,YAAY;ATNpCb,ASOE,ANJFa,AIAFwB,ADJExB,ENCAb,AGGAa,KAAK,AIAA,CPHC,ASOA2D,ANJAnD,AIAAiB,CPHC5B,EOGT,CJAE,AIAUG,CPHV,ASOW,ANJA,CHHCd,ESOEyB,CFJhB,EPHE,EAAmBb,AMDb6B,EAAN,CGQsB,AHRb,CGQciC,ENJvB,CHHA,CACE,AGEyBrD,QAA3B,EHFWR,AMFX,EGQc,AHRYwB,CNExB,ASMsC,ETNxB,EMFhB,oBGQc,CAAZ;ATNgB3B,AQQlB,ALLD,CANM,GHGaA,KQQX,CRRiB,CAACG,CQQzB,ERRwB,CAAN,GAAcd,QAAQ,CAACC,KAAK,CAACa,GAAD,CAAN,CAAtB;AAAqC,AQSxD,ACFG,AHRFyB,EAAAA,CNAA,MSQO,AHRA,CAACC,GGQGoC,AHRX,CGQY,AHRA7D,GGQG,CAAb,EAAgB6D,CAAC,GAAGF,KAAK,CAAC1C,EHR5B,IGQE,EAAkC4C,CAAC,EAAnC,EAAuC;ATNzC,ASOI,AHRL,SNCQjE,CSOC8C,KTPR,CSOc,CAACJ,UAAP,CAAkBqB,KAAK,CAACE,CAAD,CAAL,CAASX,IAA3B,MAAqCR,MAAM,CAACV,YAAP,EAAzC,EAAgE;ATNrE,AQSD,ACFQY,QAAAA,CDECN,MLNMtC,GMIG,CDElB,ACFmB2D,CDECpB,GAApB,CCFwB,CDEC,ACFAsB,CAAD,CAAN,CAAV;ADGN,ACFK,SDEE,CAAC,KAAKtB,GAAN,EAAWC,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI;;ADILC,ACFIe,IAAAA,GDEG,CAACxB,MCFM,GAAG,GDEjB,CCFI,EDEmBD,kBAAvB;AACAU,ACFG,GATsB,EASpB,EDEE,ACXkB,CDWjBH,ACXN,UDWF,GAAqBA,UAArB;ACDC;;AAEDwB,MAAM,CAACrB,OAAP,GAAiBgB,SAAjB","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["export default function deepcopy(value) {\n  if (!(!!value && typeof value == 'object')) {\n    return value;\n  }\n  if (Object.prototype.toString.call(value) == '[object Date]') {\n    return new Date(value.getTime());\n  }\n  if (Array.isArray(value)) {\n    return value.map(deepcopy);\n  }\n  var result = {};\n  Object.keys(value).forEach(\n    function(key) { result[key] = deepcopy(value[key]); });\n  return result;\n}\n","!function(e){\"function\"==typeof define&&define.amd?define(e):e()}(function(){\"use strict\";module.exports=function(e,n,t){for(var i=e,r=(n=(n=n.toString().replace(/\\[(\\w+)\\]/g,\".$1\")).toString().replace(/^\\./,\"\")).split(\".\"),o=0;o<r.length;++o){var f=r[o];f in i?i.hasOwnProperty(f)&&(void 0!==t&&o===r.length-1&&(i[f]=t),i=i[f]):i[f]=t}return i}});\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports,require(\"deep-clone-simple\"),require(\"object-bystring\")):\"function\"==typeof define&&define.amd?define([\"exports\",\"deep-clone-simple\",\"object-bystring\"],e):e((t=t||self).substate={},t.deepclone,t.byString)}(this,(function(t,e,s){\"use strict\";e=e&&e.hasOwnProperty(\"default\")?e.default:e,s=s&&s.hasOwnProperty(\"default\")?s.default:s;class a{constructor(){this.events={}}on(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){if(this.events[t])for(var s=0;s<this.events[t].length;s++)if(this.events[t][s]===e){this.events[t].splice(s,1);break}}emit(t,e){this.events[t]&&this.events[t].forEach((function(t,s){t(e)}))}}const r=\"UPDATE_STATE\";class i extends a{constructor(t={}){super(),this.name=t.name||\"SubStateInstance\",this.afterUpdate=t.afterUpdate||[],this.beforeUpdate=t.beforeUpdate||[],this.currentState=t.currentState||0,this.stateStorage=t.stateStorage||[],this.defaultDeep=t.defaultDeep||!1,t.state&&this.stateStorage.push(t.state),this.init()}init(){this.on(r,this.updateState.bind(this))}getState(t){return this.stateStorage[t]}getCurrentState(t){return this.getState(this.currentState)}getProp(t){return s(this.getCurrentState(),t)}changeState(t){this.currentState=t.requestedState,this.emit(t.$type||\"STATE_CHANGED\",this.getCurrentState())}resetState(){this.currentState=0,this.stateStorage=[this.stateStorage[0]],this.emit(\"STATE_RESET\")}pushState(t){this.stateStorage.push(t),this.currentState=this.stateStorage.length-1}updateState(t){let a;this.beforeUpdate.length>0&&this.beforeUpdate.forEach(e=>e(this,t)),a=t.$deep||this.defaultDeep?e(this.getCurrentState()):Object.assign({},this.getCurrentState());for(let e in t)t.hasOwnProperty(e)&&s(a,e,t[e]);!this.defaultDeep&&(a.$deep=!1),t.$type||(a.$type=r),this.pushState(a),this.afterUpdate.length>0&&this.afterUpdate.forEach(t=>t(this)),this.emit(t.$type||\"STATE_UPDATED\",this.getCurrentState())}}t.mergeStores=function(t,e={}){let s={},a={},r=!1,n=[],h=[];t.forEach(e=>{s=Object.assign(e.getCurrentState()||{},s);for(let t in e.events)a[t]?a[t]=e.events[t].concat(a[t]):a[t]=e.events[t].slice(0);e.defaultDeep&&(r=!0),a.UPDATE_STATE=a.UPDATE_STATE.slice(t.length-1),n=e.beforeUpdate.concat(n),h=e.afterUpdate.concat(h)}),e.state=s,e.defaultDeep=e.defaultDeep||r,e.afterUpdate=h,e.beforeUpdate=n;const o=new i(e);return o.events=Object.assign(o.events,a),o},t.substate=i,Object.defineProperty(t,\"__esModule\",{value:!0})}));\n","import { substate } from \"substate\";\n\nconst store = new substate({\n  name: \"formState\",\n  state: {\n    todos: []\n  }\n});\n\nexport const createTodo = text => {\n  const newState = {\n    // $type: \"ADD_TODO\",\n    todos: [text]\n  };\n  store.emit(\"UPDATE_STATE\", newState);\n};\n\nexport default store;\n","import { createTodo } from \"./formState\";\nexport default function wireForm() {\n  const form = document.querySelector('[data-ref=\"form\"]');\n  form.addEventListener(\"submit\", e => {\n    e.preventDefault();\n    const text = e.target.querySelector(\"input\").value;\n    if (text.length > 0) {\n      createTodo(text);\n    }\n  });\n}\n","import { substate } from \"substate\";\n\nconst store = new substate({\n  name: \"listState\"\n});\n\nexport const addTodoList = state => {\n  return state.getProp(\"todos\").map(todo => {\n    return `<li>${todo}</li>`;\n  });\n};\n\nexport default store;\n","import store, { addTodoList } from \"./listState\";\n\nexport default function wireList() {\n  const list = document.querySelector('[data-ref=\"list\"]');\n\n  function addIt() {\n    console.log(\"oh\");\n    list.innerHTML = addTodoList();\n  }\n\n  store.on(\"STATE_UPDATED\", addIt);\n  console.log(store);\n}\n","import { mergeStores } from \"substate\";\n\nimport \"./styles.css\";\nimport wireForm from \"./form/form\";\nimport wireList from \"./list/list\";\nimport listStore from \"./list/listState\";\nimport formStore from \"./form/formState\";\nwireForm();\nwireList();\n\nconst store = mergeStores([listStore, formStore], {\n  name: \"mergedStore\"\n});\n\nconsole.log(store);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}