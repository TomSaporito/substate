{"version":3,"sources":["node_modules/deep-clone-simple/index.js","node_modules/object-bystring/dist/index.js","node_modules/substate/dist/index.js","src/state.js","src/form/formState.js","src/form/form.js","src/list/listState.js","src/list/list.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["deepcopy","value","Object","prototype","toString","call","Date","getTime","Array","isArray","map","result","keys","forEach","key","store","substate","state","todos","createTodo","text","newState","$type","getProp","concat","emit","wireForm","form","document","querySelector","addEventListener","e","preventDefault","target","length","addTodoList","todo","wireList","list","addIt","console","log","innerHTML","flat","on","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","module"],"mappings":"ASAA,ACAA,IDAI6C,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;ATAA,ACAA;ADCA,AQAA,ACCA,ARDA,AMDA,SCCSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEjB,ADFJ,ICEIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AFHJ,IEGIA,IAAI,CAACI,MAAL;AVLW,ASMb,ACAC,ALNH,ADAA,AGAA,ADAO,AHAP,GOIE,CJJW7B,KNAWnC,ASMf6C,MHNe,ENAT,CAAkB5C,ASM/B,AHNyB,KNAZ,EAAyB,EMA3BkC,WAAc,CAAAlB,KAAK,EAAI;ANClC,ASMD,AHNC,MNAI,EAAE,CAAC,AMAAA,CNAChB,IMAI,CNAN,AMAOiB,INAI,CMAV,CAAYR,GAAZ,CAAgB,CNACT,KAAP,IAAgB,AMAVmC,IAAI,EAAI,ENA3B,CAAJ,EAA4C;AAC1C,AUKFyB,ALNa,ADCR,AGDP,ADCI,EIKFA,ENLW1C,KMKJ,ALNeO,CKMduC,CVLChE,GUKT,ANLqB,EJAnB,CUKa2D,ALNF,ADCW,GCDS,CKMd,CAACK,GJLJ7B,CIKD,ANLJjB,CMKc+C,EJLvB,GIKa,CAAgB,GAAhB,ANLS,CAAA9C,CMKY,CAArB,ENLa,EMKa,ANLT,GMKjB,GAAgCd,IAAI,CAAC6D,GAAL,EAA/C;AVJC,ASMH,ACDEP,ALNA,ADCA,AIAF,AFAG,EIKDA,CJPO,CAAP,EIOI,ALNEjC,ADCAN,CMKD+C,EDCErB,CJPG,GAAGnB,CDCC,GMKd,ANLiB,CMKDyC,GDClB,AJPuB,CAACxC,EIOA,MCDtB,CAA6BgC,ILNhB,CAAuB,EKMpC,EAAsCD,IAAI,CAACU,ULN9B,CKMb,ALNA;AIQA,ACDD,ALNC3C,ADCEL,AIAJ,ADDe,ADCd,AHFM,CGFA,CDGLK,EDCEL,ADFSP,EECP,CAACe,EDCE,AGDeO,AJDN,ECEP,CDFU,IAAIrB,CICV,GAAoB,CHAhB,ECAjB,CAAsB,QAAtB,CFDmB,CECa,AFDA,UECAe,CAAC,EAAI;ALCrC,ASOA,AJPEA,ADCAb,AGDF,AJDED,EAAAA,EECAc,ADCAb,CCDC,CLAChB,ASOA,AJPA8B,AEAEM,CJDC,ECEA,ADFE,CICC,CHCDvB,CJDC,CAACZ,AOAEyB,OFAX,CEAmB,CPAjB,AOAkBC,CPADzB,CICNmB,OJDX,AICK,CJDqBlB,AICP,GGDV,CPAT,AOAgC,CPADJ,EIC1B,EAAuBuB,CJD5B,KAAyC,AICpC,CAA8B,CAACJ,IAAD,CAA9B,CGDI,CAAb,MPAA,EAA8D;AAC5D,ASOA,ACDJ,ALNI,ADFe,ADCXF,GCDN,CMQEqD,APPIrD,IECEE,CFDG,CMQH,CTPC,AGDI,CECD,EIOA4B,ACDA,CVNC1C,AKAEyB,CAAC,CKMD,ALNEE,ELAR,ASOD,CTPUhC,CSOhB,ACDJ,ELNiB,CAAS4B,CLAD,CAACtB,OAAN,EAAT,CAAP,CKAa,CAAuB,OAAvB,EAAgCN,KAA7C;ALCD,ASOA,AFPD,AJHS,GMQT,CAEE,OAAOgD,AFPAV,GEOP,EAAY,AFPd,CAAetB,KAAf,EAAsB;AEQpB,ACFJ,ALNI,ADCFF,AGAEyB,AJL8B,CAAb,CAAd,EIKHA,IEOIU,AJRA9B,CKMCoD,EHLE,CFDC,AECA/B,CFDCP,EIQE,ALPPT,AGAJ,CAAYR,EEOE,ACFlB,CDEmB,AJRX,ADCN,CAAW,CMKQ,AHLjB,CFDkB,CAAlB,CIQoBgC,CJRC,EIQE,CAACE,KAAV,CLPhB,CKOiCC,CLPN/B,IKOX,CAAuB,GLPvC,4DKOgB,CAAd;ATPF,AUMA,ALNI,ADCL,AGAGiB,CHNG,GGMHA,EPDE9B,AUMA+D,EHLE,CAAC7B,EPDE,CAACjC,IUMV,EAAgB,AHLd,CPDE,CAAcR,COCC,IPDf,CAAJ,EAA0B,KKAXmB,IAAX,YEC2BH,KAAZ,EAAmB0B,IAAnB,EAAjB;APAA,ASOA,ACDA,ALNC,AECF,QEMKO,GTPGjD,ISOP,CTPY,CAACS,ASOA,GTPN,CAAUV,QAAV,CAAP;AACD,ASOG,ACDH,ALNA,GAND,UIaWqD,UAAU,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD,AJPJ,AECCnC,eAAM6B,EAAN,CAAS,UAAT,EAAqBL,KAArB;APDA,ASQC,ACDDgC,AHLD,EGKCA,IVPI5D,MAAM,AUOA,GVPG,AUOA8D,EVPb,QUOuB,CAAC,YAAY;AVNpCvE,AUOE,EVPFA,MAAM,AUOAwE,CVPC9D,IAAP,AUOW,CVPCX,EUOE2B,GVPd,EAAmBf,GUOG,CAAC8D,GVPvB,CACE,UAAS7D,EUMG,CVNZ,AUMsC,EVNxB,sBUMF,CAAZ;AVNgBH,ASQlB,ITRkBA,KSQX,CTRiB,CAACG,CSQzB,ETRwB,CAAN,GAAcd,QAAQ,CAACC,KAAK,CAACa,GAAD,CAAN,CAAtB;AAAqC,ASSxD,ACFG,GVRF,MUQO,IAAI8D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACxC,MAA1B,EAAkC0C,CAAC,EAAnC,EAAuC;AVNzC,AUOI,SVPGjE,CUOC8C,KVPR,CUOc,CAACJ,UAAP,CAAkBqB,KAAK,CAACE,CAAD,CAAL,CAASX,IAA3B,MAAqCR,MAAM,CAACV,YAAP,EAAzC,EAAgE;AVNrE,ASSD,ACFQY,QAAAA,CDECN,SCFS,CDElB,ACFmBqB,CDECpB,GAApB,CCFwB,CDEC,ACFAsB,CAAD,CAAN,CAAV;ADGN,ACFK,SDEE,CAAC,KAAKtB,GAAN,EAAWC,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI;;ADILC,ACFIe,IAAAA,GDEG,CAACxB,MCFM,GAAG,GDEjB,CCFI,EDEmBD,kBAAvB;AACAU,ACFG,GATsB,EASpB,EDEE,ACXkB,CDWjBH,ACXN,UDWF,GAAqBA,UAArB;ACDC;;AAEDwB,MAAM,CAACrB,OAAP,GAAiBgB,SAAjB","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["export default function deepcopy(value) {\n  if (!(!!value && typeof value == 'object')) {\n    return value;\n  }\n  if (Object.prototype.toString.call(value) == '[object Date]') {\n    return new Date(value.getTime());\n  }\n  if (Array.isArray(value)) {\n    return value.map(deepcopy);\n  }\n  var result = {};\n  Object.keys(value).forEach(\n    function(key) { result[key] = deepcopy(value[key]); });\n  return result;\n}\n","!function(e){\"function\"==typeof define&&define.amd?define(e):e()}(function(){\"use strict\";module.exports=function(e,n,t){for(var i=e,r=(n=(n=n.toString().replace(/\\[(\\w+)\\]/g,\".$1\")).toString().replace(/^\\./,\"\")).split(\".\"),o=0;o<r.length;++o){var f=r[o];f in i?i.hasOwnProperty(f)&&(void 0!==t&&o===r.length-1&&(i[f]=t),i=i[f]):i[f]=t}return i}});\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"deep-clone-simple\"),require(\"object-bystring\")):\"function\"==typeof define&&define.amd?define([\"deep-clone-simple\",\"object-bystring\"],e):(t=t||self).substate=e(t.deepclone,t.byString)}(this,(function(t,e){\"use strict\";t=t&&t.hasOwnProperty(\"default\")?t.default:t,e=e&&e.hasOwnProperty(\"default\")?e.default:e;class s{constructor(){this.events={}}on(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){if(this.events[t])for(var s=0;s<this.events[t].length;s++)if(this.events[t][s]===e){this.events[t].splice(s,1);break}}emit(t,e){this.events[t]&&this.events[t].forEach((function(t,s){t(e)}))}}const a=\"UPDATE_STATE\";return class extends s{constructor(t={}){super(),this.name=t.name||\"SubStateInstance\",this.afterUpdate=t.afterUpdate||[],this.beforeUpdate=t.beforeUpdate||[],this.currentState=t.currentState||0,this.stateStorage=t.stateStorage||[],this.defaultDeep=t.defaultDeep||!1,t.state&&this.stateStorage.push(t.state),this.on(a,this.updateState.bind(this))}getState(t){return this.stateStorage[t]}getCurrentState(t){return this.getState(this.currentState)}getProp(t){return e(this.getCurrentState(),t)}changeState(t){this.currentState=t.requestedState,this.emit(t.$type||\"STATE_CHANGED\",this.getCurrentState())}resetState(){this.currentState=0,this.stateStorage=[this.stateStorage[0]],this.emit(\"STATE_RESET\")}pushState(t){this.stateStorage.push(t),this.currentState=this.stateStorage.length-1}updateState(s){let r;this.beforeUpdate.length>0&&this.beforeUpdate.forEach(t=>t(this,s)),r=s.$deep||this.defaultDeep?t(this.getCurrentState()):Object.assign({},this.getCurrentState());for(let t in s)s.hasOwnProperty(t)&&e(r,t,s[t]);!this.defaultDeep&&(r.$deep=!1),s.$type||(r.$type=a),this.pushState(r),this.afterUpdate.length>0&&this.afterUpdate.forEach(t=>t(this)),this.emit(s.$type||\"STATE_UPDATED\",this.getCurrentState())}}}));\n","import substate from 'substate';\n\nexport const store = new substate({\n    state: {\n        todos: []\n    }\n});\n\n","import { store } from '../state';\n\nexport const createTodo = text => {\n  const newState = {\n    $type: \"ADD_TODO\",\n    todos: store.getProp('todos').concat([text])\n  };\n  store.emit(\"UPDATE_STATE\", newState);\n};\n\n","import { createTodo } from \"./formState\";\nexport default function wireForm() {\n  const form = document.querySelector('[data-ref=\"form\"]');\n  form.addEventListener(\"submit\", e => {\n    e.preventDefault();\n    const text = e.target.querySelector(\"input\").value;\n    if (text.length > 0) {\n      createTodo(text);\n    }\n  });\n}\n","export const addTodoList = state => {\n  return state.todos.map(todo => {\n    return `<li>${todo}</li>`;\n  });\n};","import { store } from '../state';\nimport { addTodoList } from \"./listState\";\n\nexport default function wireList() {\n  const list = document.querySelector('[data-ref=\"list\"]');\n\n  function addIt(state) {\n    console.log(state);\n    list.innerHTML = addTodoList(state).flat();\n  }\n\n  store.on(\"ADD_TODO\", addIt);\n}\n","import \"./styles.css\";\nimport wireForm from \"./form/form\";\nimport wireList from \"./list/list\";\nwireForm();\nwireList();\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}